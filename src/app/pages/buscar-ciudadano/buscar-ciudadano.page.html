<app-navbar title="Ciudadanos"></app-navbar>
<ion-content id="main-content">
  <div class="grid-wrapper">
    <ion-grid class="grid-center">
      <ion-row class="ion-justify-content-center">
        <ion-col size-xs="12" size-sm="12" size-md="10" size-lg="10">
          <div class="contenedor-formulario">
            <ion-toolbar class="cabeza">
              <ion-title class="titulo-formulario">Buscador</ion-title>
            </ion-toolbar>

            <!-- Barra de búsqueda -->
            <ion-searchbar class="search-bar" placeholder="Buscar Ciudadano" [(ngModel)]="searchTerm"
              (ionInput)="filtrarCiudadanos()"></ion-searchbar>

            <!-- Contenedor de filtros -->
            <div class="filter-container">
              <ion-item lines="none" class="filter-item">
                <ion-label>Filtrar por:</ion-label>
                <ion-select [(ngModel)]="selectedFilter" (ionChange)="filtrarCiudadanos()">
                  <ion-select-option value="todos">Todos</ion-select-option>
                  <ion-select-option value="activo">Activos</ion-select-option>
                  <ion-select-option value="inactivo">Inactivos</ion-select-option>
                  <ion-select-option value="soltero">Solteros</ion-select-option>
                  <ion-select-option value="casado">Casados</ion-select-option>
                  <ion-select-option value="divorciado">Divorciados</ion-select-option>
                  <ion-select-option value="viudo">Viudos</ion-select-option>
                  <ion-select-option value="conCargos">Con Cargos</ion-select-option>
                  <ion-select-option value="sinCargos">Sin Cargos</ion-select-option>
                  <ion-select-option value="candidato">Candidato a cargo</ion-select-option>
                  <ion-select-option value="conComentario">Con comentario</ion-select-option>
                </ion-select>
              </ion-item>
              <!-- Filtro por cargo para "conCargos" -->
              <ion-item lines="none" class="filter-item" *ngIf="selectedFilter === 'conCargos'">
                <ion-label>Seleccionar Cargo:</ion-label>
                <ion-select [(ngModel)]="selectedCargo" (ionChange)="filtrarCiudadanos()">
                  <ion-select-option value="todos">Todos</ion-select-option>
                  <ion-select-option *ngFor="let cargo of cargos" [value]="cargo.service_name">
                    {{ cargo.service_name }}
                  </ion-select-option>
                </ion-select>
              </ion-item>

              <!-- Filtro por cargo para "candidato" -->
              <!-- <ion-item lines="none" class="filter-item" *ngIf="selectedFilter === 'candidato'">
  <ion-label>Candidato a:</ion-label>
  <ion-select [(ngModel)]="selectedCandidatoCargo" (ionChange)="filtrarCiudadanos()">
<ion-select-option *ngFor="let cargo of cargos" [value]="cargo.service_name">
  {{ cargo.service_name }}
</ion-select-option>


  </ion-select>

</ion-item>-->

            </div>

            <!-- Resultados en tabla -->
            <div class="tabla-container">
              <table class="tabla-ciudadanos">
                <thead>
                  <tr>
                    <th>Nombre</th>
                    <!-- <th>Estado civil</th> -->
                    <!-- <th>Teléfono</th> -->
                    <!-- <th>Estado</th> -->
                    <th>Datos generales</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let ciudadano of ciudadanosFiltrados" class="fila">
                    <td>
                      <div class="nombre">
                        {{ ciudadano.name }} {{ ciudadano.last_name_father }} {{ ciudadano.last_name_mother }}
                        <!-- <span *ngIf="selectedFilter === 'candidato' && estaPorTerminarDescanso(ciudadano)"
                          class="badge-aviso">Próximo a terminar descanso</span> -->
                      </div>
                    </td>
                    <!-- <td>{{ mostrarEstadoCivil(ciudadano) }}</td> -->
                    <!-- <td>{{ ciudadano.phone || '-' }}</td> -->
                    <!-- <td>
                      <span [class.estado-activo]="!ciudadano.deleted_at"
                        [class.estado-inactivo]="ciudadano.deleted_at">
                        {{ ciudadano.deleted_at ? 'Inactivo' : 'Activo' }}
                      </span>
                    </td> -->
                    <td>
                      <ion-button class="app-btn-primary" (click)="verCiudadano(ciudadano.id)">
                        Datos generales
                      </ion-button>
                    </td>
                  </tr>
                  <tr *ngIf="ciudadanosFiltrados.length === 0">
                    <td colspan="5" class="sin-resultados">No se encontraron ciudadanos</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>
</ion-content>